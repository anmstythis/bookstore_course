{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\My\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u043A\\u043E\\u043D\\u0441\\u043F\\u0435\\u043A\\u0442\\u044B\\\\\\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B \\u043A \\u043A\\u0443\\u0440\\u0441\\u0430\\u0447\\u0443 4 \\u043A\\u0443\\u0440\\u0441\\\\project\\\\bookmix\\\\src\\\\pages\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Card from '../components/CardMain.js';\nimport Footer from '../components/Footer.js';\nimport Header from '../components/Header.js';\nimport Form from '../components/Form.js';\nimport { motion } from 'framer-motion';\nimport { getCurrentUserId } from '../utils/userUtils.js';\nimport { getCartFromStorage, saveCartToStorage } from '../utils/cartUtils.js';\nimport { useBooksData } from '../utils/booksUtils.js';\nimport api from '../axiosSetup.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Cart = () => {\n  _s();\n  const {\n    data,\n    setData\n  } = useBooksData();\n  const [deliveryTypes, setDeliveryTypes] = useState([]);\n  const [selectedDeliveryType, setSelectedDeliveryType] = useState('');\n  const [address, setAddress] = useState({\n    country: '',\n    city: '',\n    street: '',\n    house: '',\n    apartment: '',\n    indexmail: ''\n  });\n  const pickup = deliveryTypes.find(dt => dt.typename.toLowerCase().includes('самовывоз'));\n  const isPickup = pickup && Number(selectedDeliveryType) === pickup.id_deliverytype;\n  useEffect(() => {\n    const fetchDeliveryTypes = async () => {\n      try {\n        const response = await api.get('/deliverytypes');\n        setDeliveryTypes(response.data);\n      } catch (err) {\n        console.error('Ошибка загрузки типов доставки:', err);\n      }\n    };\n    fetchDeliveryTypes();\n  }, []);\n  const handleCartChange = newCart => {\n    if (!getCurrentUserId()) return;\n    saveCartToStorage(newCart);\n    const cartByBookId = new Map(newCart.map(ci => [ci.bookId, ci.quantity]));\n    setData(prev => prev.map(p => ({\n      ...p,\n      addedAmount: cartByBookId.get(p.id) || 0,\n      addedToCart: cartByBookId.has(p.id)\n    })));\n  };\n  const calculateTotalPrice = () => {\n    return data.reduce((total, item) => total + item.addedAmount * item.price, 0);\n  };\n  const Sold = async () => {\n    try {\n      if (!getCurrentUserId()) return;\n      const cart = getCartFromStorage();\n      if (cart.length === 0) return;\n      let addressId = null;\n      if (!isPickup) {\n        const addressRes = await api.post('/addresses', address);\n        addressId = addressRes.data.id_address;\n      }\n      const orderPayload = {\n        user_id: getCurrentUserId(),\n        status_id: 1,\n        deliverytype_id: Number(selectedDeliveryType),\n        address_id: isPickup ? null : addressId,\n        items: cart.map(ci => {\n          var _data$find;\n          return {\n            book_id: ci.bookId,\n            quantity: ci.quantity,\n            price: ((_data$find = data.find(d => d.id === ci.bookId)) === null || _data$find === void 0 ? void 0 : _data$find.price) || 0\n          };\n        })\n      };\n      ;\n      console.log('Создание заказа:', orderPayload);\n      await api.post('/orders', orderPayload);\n      console.log(api.headers[\"X-User-Login\"]);\n      saveCartToStorage([]);\n      window.location.reload();\n    } catch (err) {\n      var _err$response;\n      console.error('Ошибка при создании заказа:', (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n      alert('Не удалось оформить заказ. Проверьте корректность данных.');\n    }\n  };\n  const BuyOption = () => {\n    const total = calculateTotalPrice();\n    if (total === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"u\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"total\",\n        children: [\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0446\\u0435\\u043D\\u0430: \", total, \" \\u0440\\u0443\\u0431.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\",\n      description: calculateTotalPrice() !== 0 ? 'Вы ещё не передумали покупать книги? Так купите их прямо сейчас!' : 'В корзине пусто.'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        x: -1000,\n        opacity: 0\n      },\n      animate: {\n        x: 0,\n        opacity: 1\n      },\n      transition: {\n        delay: 0.5,\n        duration: 1.5\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        term: d => d.addedToCart === true,\n        route: \"cart\",\n        onCartChange: handleCartChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BuyOption, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), calculateTotalPrice() > 0 && /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      transition: {\n        delay: 1,\n        duration: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formContainer\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: e => {\n            e.preventDefault();\n            Sold();\n          },\n          submitLabel: \"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\",\n          loadingLabel: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u0435...\",\n          formClassName: \"form\",\n          buttonClassName: \"buyButton\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"delivery\",\n            className: \"formLabel\",\n            children: \"\\u0422\\u0438\\u043F \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"formInput\",\n            id: \"delivery\",\n            value: selectedDeliveryType,\n            onChange: e => setSelectedDeliveryType(e.target.value),\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), deliveryTypes.map(dt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: dt.id_deliverytype,\n              children: dt.typename\n            }, dt.id_deliverytype, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), !isPickup && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0443\",\n              value: address.country,\n              onChange: e => setAddress({\n                ...address,\n                country: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u0413\\u043E\\u0440\\u043E\\u0434\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\",\n              value: address.city,\n              onChange: e => setAddress({\n                ...address,\n                city: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u0423\\u043B\\u0438\\u0446\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0443\\u043B\\u0438\\u0446\\u0443\",\n              value: address.street,\n              onChange: e => setAddress({\n                ...address,\n                street: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u0414\\u043E\\u043C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0434\\u043E\\u043C\\u0430\",\n              value: address.house,\n              onChange: e => setAddress({\n                ...address,\n                house: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u041A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u044B\",\n              value: address.apartment,\n              onChange: e => setAddress({\n                ...address,\n                apartment: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"formLabel\",\n              children: \"\\u041F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"formInput\",\n              type: \"text\",\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441\",\n              value: address.indexmail,\n              onChange: e => setAddress({\n                ...address,\n                indexmail: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(Cart, \"B4KAd3UuAWDZ3CReWXtN2q3lCKk=\", false, function () {\n  return [useBooksData];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useState","useEffect","Card","Footer","Header","Form","motion","getCurrentUserId","getCartFromStorage","saveCartToStorage","useBooksData","api","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","data","setData","deliveryTypes","setDeliveryTypes","selectedDeliveryType","setSelectedDeliveryType","address","setAddress","country","city","street","house","apartment","indexmail","pickup","find","dt","typename","toLowerCase","includes","isPickup","Number","id_deliverytype","fetchDeliveryTypes","response","get","err","console","error","handleCartChange","newCart","cartByBookId","Map","map","ci","bookId","quantity","prev","p","addedAmount","id","addedToCart","has","calculateTotalPrice","reduce","total","item","price","Sold","cart","length","addressId","addressRes","post","id_address","orderPayload","user_id","status_id","deliverytype_id","address_id","items","_data$find","book_id","d","log","headers","window","location","reload","_err$response","alert","BuyOption","children","className","fileName","_jsxFileName","lineNumber","columnNumber","title","description","div","initial","x","opacity","animate","transition","delay","duration","term","route","onCartChange","onSubmit","e","preventDefault","submitLabel","loadingLabel","formClassName","buttonClassName","htmlFor","value","onChange","target","required","type","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/My/OneDrive/Документы/конспекты/документы к курсачу 4 курс/project/bookmix/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from '../components/CardMain.js';\nimport Footer from '../components/Footer.js';\nimport Header from '../components/Header.js';\nimport Form from '../components/Form.js';\nimport { motion } from 'framer-motion';\nimport { getCurrentUserId } from '../utils/userUtils.js';\nimport { getCartFromStorage, saveCartToStorage } from '../utils/cartUtils.js';\nimport { useBooksData } from '../utils/booksUtils.js';\nimport api from '../axiosSetup.js'\n\nconst Cart = () => {\n  const { data, setData } = useBooksData();\n  const [deliveryTypes, setDeliveryTypes] = useState([]);\n  const [selectedDeliveryType, setSelectedDeliveryType] = useState('');\n  const [address, setAddress] = useState({\n    country: '',\n    city: '',\n    street: '',\n    house: '',\n    apartment: '',\n    indexmail: '',\n  });\n\n  const pickup = deliveryTypes.find(dt =>dt.typename.toLowerCase().includes('самовывоз'));\n  const isPickup = pickup && Number(selectedDeliveryType) === pickup.id_deliverytype;\n\n  useEffect(() => {\n    const fetchDeliveryTypes = async () => {\n      try {\n        const response = await api.get('/deliverytypes');\n        setDeliveryTypes(response.data);\n      } catch (err) {\n        console.error('Ошибка загрузки типов доставки:', err);\n      }\n    };\n    fetchDeliveryTypes();\n  }, []);\n\n  const handleCartChange = (newCart) => {\n    if (!getCurrentUserId()) return;\n\n    saveCartToStorage(newCart);\n\n    const cartByBookId = new Map(newCart.map(ci => [ci.bookId, ci.quantity]));\n    setData(prev =>\n      prev.map(p => ({\n        ...p,\n        addedAmount: cartByBookId.get(p.id) || 0,\n        addedToCart: cartByBookId.has(p.id),\n      }))\n    );\n  };\n\n  const calculateTotalPrice = () => {\n    return data.reduce((total, item) => total + item.addedAmount * item.price, 0);\n  };\n\n  const Sold = async () => {\n    try {\n      if (!getCurrentUserId()) return;\n      const cart = getCartFromStorage();\n      if (cart.length === 0) return;\n\n      let addressId = null;\n      \n      if (!isPickup) {\n        const addressRes = await api.post('/addresses', address);\n        addressId = addressRes.data.id_address;\n      }\n\n      const orderPayload = {\n        user_id: getCurrentUserId(),\n        status_id: 1,\n        deliverytype_id: Number(selectedDeliveryType),\n        address_id: isPickup ? null : addressId,\n        items: cart.map(ci => ({\n          book_id: ci.bookId,\n          quantity: ci.quantity,\n          price: data.find(d => d.id === ci.bookId)?.price || 0,\n        })),\n      };;\n\n      console.log('Создание заказа:', orderPayload);\n      await api.post('/orders', orderPayload);\n\n      console.log(api.headers[\"X-User-Login\"])\n\n      saveCartToStorage([]);\n      window.location.reload();\n    } catch (err) {\n      console.error('Ошибка при создании заказа:', err?.response?.data || err);\n      alert('Не удалось оформить заказ. Проверьте корректность данных.');\n    }\n  };\n\n  const BuyOption = () => {\n    const total = calculateTotalPrice();\n    if (total === 0) return null;\n\n    return (\n      <u><p className='total'>Общая цена: {total} руб.</p></u>\n    );\n  };\n\n  return (\n    <div>\n      <Header\n        title=\"Корзина\"\n        description={\n          calculateTotalPrice() !== 0\n            ? 'Вы ещё не передумали покупать книги? Так купите их прямо сейчас!'\n            : 'В корзине пусто.'\n        }\n      />\n\n      <motion.div\n        initial={{ x: -1000, opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        transition={{ delay: 0.5, duration: 1.5 }}\n      >\n        <Card\n          term={d => d.addedToCart === true}\n          route=\"cart\"\n          onCartChange={handleCartChange}\n        />\n      </motion.div>\n\n      <BuyOption />\n\n      {calculateTotalPrice() > 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 1, duration: 1 }}\n        >\n\n          <div className=\"formContainer\">\n            <Form\n              onSubmit={(e) => {\n                e.preventDefault();\n                Sold(); \n              }}\n              submitLabel=\"Купить\"\n              loadingLabel=\"Оформление...\"\n              formClassName=\"form\"\n              buttonClassName=\"buyButton\"\n            >\n              <label htmlFor=\"delivery\" className='formLabel'>Тип доставки:</label>\n              <select\n                className=\"formInput\"\n                id=\"delivery\"\n                value={selectedDeliveryType}\n                onChange={(e) => setSelectedDeliveryType(e.target.value)}\n                required\n              >\n                <option value=\"\">Выберите тип</option>\n                {deliveryTypes.map(dt => (\n                  <option key={dt.id_deliverytype} value={dt.id_deliverytype}>\n                    {dt.typename}\n                  </option>\n                ))}\n              </select>\n\n              {!isPickup && (\n                <>\n                  <label className='formLabel'>Страна</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите страну\"\n                      value={address.country}\n                      onChange={e => setAddress({ ...address, country: e.target.value })}\n                      required\n                    />\n                    <label className='formLabel'>Город</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите город\"\n                      value={address.city}\n                      onChange={e => setAddress({ ...address, city: e.target.value })}\n                      required\n                    />\n                    <label className='formLabel'>Улица</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите улицу\"\n                      value={address.street}\n                      onChange={e => setAddress({ ...address, street: e.target.value })}\n                      required\n                    />\n                    <label className='formLabel'>Дом</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите номер дома\"\n                      value={address.house}\n                      onChange={e => setAddress({ ...address, house: e.target.value })}\n                      required\n                    />\n                    <label className='formLabel'>Квартира</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите номер квартиры\"\n                      value={address.apartment}\n                      onChange={e => setAddress({ ...address, apartment: e.target.value })}\n                    />\n                    <label className='formLabel'>Почтовый индекс</label>\n                    <input\n                      className='formInput'\n                      type=\"text\"\n                      placeholder=\"Введите почтовый индекс\"\n                      value={address.indexmail}\n                      onChange={e => setAddress({ ...address, indexmail: e.target.value })}\n                      required\n                    />\n                </>\n              )}\n            </Form>\n          </div>\n        </motion.div>\n      )}\n      <Footer />\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}