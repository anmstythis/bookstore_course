{"ast":null,"code":"import { getCurrentUserId } from './userUtils.js';\nexport const getFavoritesFromStorage = (userId = getCurrentUserId()) => {\n  if (!userId) return [];\n  try {\n    const raw = localStorage.getItem(`favorites:${userId}`);\n    return raw ? JSON.parse(raw) : [];\n  } catch {\n    return [];\n  }\n};\nexport const saveFavoritesToStorage = (favorites, userId = getCurrentUserId()) => {\n  if (!userId) return;\n  localStorage.setItem(`favorites:${userId}`, JSON.stringify(favorites));\n};\nexport const toggleFavoriteStorage = bookId => {\n  const userId = getCurrentUserId();\n  if (!userId) return null;\n  const favorites = getFavoritesFromStorage(userId);\n  const isAlreadyFavorite = favorites.some(f => f.bookId === bookId);\n  let updatedFavorites;\n  if (isAlreadyFavorite) {\n    updatedFavorites = favorites.filter(f => f.bookId !== bookId);\n  } else {\n    updatedFavorites = [...favorites, {\n      bookId\n    }];\n  }\n  saveFavoritesToStorage(updatedFavorites, userId);\n  return {\n    bookId,\n    isFavorite: !isAlreadyFavorite\n  };\n};","map":{"version":3,"names":["getCurrentUserId","getFavoritesFromStorage","userId","raw","localStorage","getItem","JSON","parse","saveFavoritesToStorage","favorites","setItem","stringify","toggleFavoriteStorage","bookId","isAlreadyFavorite","some","f","updatedFavorites","filter","isFavorite"],"sources":["C:/Users/My/OneDrive/Документы/конспекты/документы к курсачу 4 курс/project/bookmix/src/utils/favoriteUtils.js"],"sourcesContent":["import { getCurrentUserId } from './userUtils.js';\r\n\r\nexport const getFavoritesFromStorage = (userId = getCurrentUserId()) => {\r\n  if (!userId) return [];\r\n  try {\r\n    const raw = localStorage.getItem(`favorites:${userId}`);\r\n    return raw ? JSON.parse(raw) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const saveFavoritesToStorage = (favorites, userId = getCurrentUserId()) => {\r\n  if (!userId) return;\r\n  localStorage.setItem(`favorites:${userId}`, JSON.stringify(favorites));\r\n};\r\n\r\nexport const toggleFavoriteStorage = (bookId) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) return null;\r\n\r\n  const favorites = getFavoritesFromStorage(userId);\r\n  const isAlreadyFavorite = favorites.some(f => f.bookId === bookId);\r\n\r\n  let updatedFavorites;\r\n  if (isAlreadyFavorite) {\r\n    updatedFavorites = favorites.filter(f => f.bookId !== bookId);\r\n  } else {\r\n    updatedFavorites = [...favorites, { bookId }];\r\n  }\r\n\r\n  saveFavoritesToStorage(updatedFavorites, userId);\r\n\r\n  return { bookId, isFavorite: !isAlreadyFavorite };\r\n};\r\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,gBAAgB;AAEjD,OAAO,MAAMC,uBAAuB,GAAGA,CAACC,MAAM,GAAGF,gBAAgB,CAAC,CAAC,KAAK;EACtE,IAAI,CAACE,MAAM,EAAE,OAAO,EAAE;EACtB,IAAI;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAaH,MAAM,EAAE,CAAC;IACvD,OAAOC,GAAG,GAAGG,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC,GAAG,EAAE;EACnC,CAAC,CAAC,MAAM;IACN,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAMK,sBAAsB,GAAGA,CAACC,SAAS,EAAEP,MAAM,GAAGF,gBAAgB,CAAC,CAAC,KAAK;EAChF,IAAI,CAACE,MAAM,EAAE;EACbE,YAAY,CAACM,OAAO,CAAC,aAAaR,MAAM,EAAE,EAAEI,IAAI,CAACK,SAAS,CAACF,SAAS,CAAC,CAAC;AACxE,CAAC;AAED,OAAO,MAAMG,qBAAqB,GAAIC,MAAM,IAAK;EAC/C,MAAMX,MAAM,GAAGF,gBAAgB,CAAC,CAAC;EACjC,IAAI,CAACE,MAAM,EAAE,OAAO,IAAI;EAExB,MAAMO,SAAS,GAAGR,uBAAuB,CAACC,MAAM,CAAC;EACjD,MAAMY,iBAAiB,GAAGL,SAAS,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACH,MAAM,KAAKA,MAAM,CAAC;EAElE,IAAII,gBAAgB;EACpB,IAAIH,iBAAiB,EAAE;IACrBG,gBAAgB,GAAGR,SAAS,CAACS,MAAM,CAACF,CAAC,IAAIA,CAAC,CAACH,MAAM,KAAKA,MAAM,CAAC;EAC/D,CAAC,MAAM;IACLI,gBAAgB,GAAG,CAAC,GAAGR,SAAS,EAAE;MAAEI;IAAO,CAAC,CAAC;EAC/C;EAEAL,sBAAsB,CAACS,gBAAgB,EAAEf,MAAM,CAAC;EAEhD,OAAO;IAAEW,MAAM;IAAEM,UAAU,EAAE,CAACL;EAAkB,CAAC;AACnD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}