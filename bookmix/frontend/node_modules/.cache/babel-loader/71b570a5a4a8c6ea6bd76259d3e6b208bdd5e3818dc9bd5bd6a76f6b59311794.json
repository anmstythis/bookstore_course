{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\My\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u043A\\u043E\\u043D\\u0441\\u043F\\u0435\\u043A\\u0442\\u044B\\\\\\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B \\u043A \\u043A\\u0443\\u0440\\u0441\\u0430\\u0447\\u0443 4 \\u043A\\u0443\\u0440\\u0441\\\\project\\\\bookmix\\\\src\\\\pages\\\\ProductInfo.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport Footer from '../components/Footer.js';\nimport Header from '../components/Header.js';\nimport { motion } from \"framer-motion\";\nimport Form from '../components/Form.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductInfo = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [book, setBook] = useState(null);\n  const [error, setError] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [reviewsError, setReviewsError] = useState(null);\n  const [isSubmittingReview, setIsSubmittingReview] = useState(false);\n  const [isDeletingReviewId, setIsDeletingReviewId] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState('');\n  const getCurrentUserId = () => {\n    try {\n      const userRaw = localStorage.getItem('user');\n      if (!userRaw) return null;\n      const parsed = JSON.parse(userRaw);\n      return (parsed === null || parsed === void 0 ? void 0 : parsed.id_user) || null;\n    } catch {\n      return null;\n    }\n  };\n  const getCartFromStorage = userId => {\n    if (!userId) return [];\n    try {\n      const raw = localStorage.getItem(`cart:${userId}`);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  };\n  const saveCartToStorage = (userId, cartItems) => {\n    if (!userId) return;\n    localStorage.setItem(`cart:${userId}`, JSON.stringify(cartItems));\n  };\n  useEffect(() => {\n    const fetchBook = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/api/books/${id}`);\n        if (!response.data) throw new Error(\"Такой книги нет!\");\n        const row = response.data;\n        const authorResponse = await axios.get(`http://localhost:5000/api/authors/${row.author_id}`);\n        const author = authorResponse.data;\n        const userId = getCurrentUserId();\n        const cart = getCartFromStorage(userId);\n        const inCart = cart.find(ci => ci.bookId === row.id_book);\n        const mapped = {\n          id: row.id_book,\n          name: row.title,\n          authorId: row.author_id,\n          author: author ? `${author.firstname} ${author.patronymic ? author.patronymic : ' '} ${author.lastname} \n        (${author.birthdate ? author.birthdate.substring(0, 4) : '???'} - \n            ${author.deathdate ? author.deathdate.substring(0, 4) : 'н.в.'})` : 'Неизвестный автор',\n          country: row.country,\n          price: Number(row.price),\n          url: row.imageurl,\n          description: row.description,\n          addedToCart: Boolean(inCart),\n          addedAmount: inCart ? inCart.quantity : 0,\n          isFavorite: row.isfavorite || false\n        };\n        setBook(mapped);\n      } catch (err) {\n        console.error(\"Ошибка при загрузке:\", err);\n        setError(err.message);\n      }\n    };\n    fetchBook();\n  }, [id]);\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        if (!id) return;\n        const {\n          data\n        } = await axios.get(`http://localhost:5000/api/reviews/book/${id}`);\n        setReviews(Array.isArray(data) ? data : []);\n      } catch (err) {\n        console.error('Ошибка при загрузке отзывов:', err);\n        setReviewsError('Не удалось загрузить отзывы');\n      }\n    };\n    fetchReviews();\n  }, [id]);\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!book) return;\n    const storedUserString = localStorage.getItem('user');\n    const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n    if (!(storedUser !== null && storedUser !== void 0 && storedUser.id_user)) {\n      setReviewsError('Для отправки отзыва необходимо войти в систему');\n      return;\n    }\n    try {\n      setIsSubmittingReview(true);\n      setReviewsError(null);\n      await axios.post('http://localhost:5000/api/reviews', {\n        user_id: storedUser.id_user,\n        book_id: book.id,\n        rating: Number(rating),\n        usercomment: comment\n      });\n      const {\n        data\n      } = await axios.get(`http://localhost:5000/api/reviews/book/${book.id}`);\n      setReviews(Array.isArray(data) ? data : []);\n      setRating(5);\n      setComment('');\n    } catch (err) {\n      console.error('Ошибка при отправке отзыва:', err);\n      setReviewsError('Не удалось отправить отзыв');\n    } finally {\n      setIsSubmittingReview(false);\n    }\n  };\n  const handleDeleteReview = async reviewId => {\n    const storedUserString = localStorage.getItem('user');\n    const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n    if (!(storedUser !== null && storedUser !== void 0 && storedUser.id_user)) {\n      setReviewsError('Необходимо войти, чтобы удалять отзывы');\n      return;\n    }\n    if (!window.confirm('Удалить этот отзыв?')) {\n      return;\n    }\n    try {\n      setIsDeletingReviewId(reviewId);\n      setReviewsError(null);\n      await axios.delete(`http://localhost:5000/api/reviews/${reviewId}`);\n      const {\n        data\n      } = await axios.get(`http://localhost:5000/api/reviews/book/${id}`);\n      setReviews(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error('Ошибка при удалении отзыва:', err);\n      setReviewsError('Не удалось удалить отзыв');\n    } finally {\n      setIsDeletingReviewId(null);\n    }\n  };\n\n  // корзина\n  const addToCart = () => {\n    if (!book) return;\n    const userId = getCurrentUserId();\n    const cart = getCartFromStorage(userId);\n    const exists = cart.find(ci => ci.bookId === book.id);\n    const newCart = exists ? cart.map(ci => ci.bookId === book.id ? {\n      ...ci,\n      quantity: ci.quantity + 1\n    } : ci) : [...cart, {\n      bookId: book.id,\n      quantity: 1\n    }];\n    saveCartToStorage(userId, newCart);\n    const updated = {\n      ...book,\n      addedToCart: true,\n      addedAmount: (book.addedAmount || 0) + 1\n    };\n    setBook(updated);\n  };\n  const removeFromCart = () => {\n    if (!book) return;\n    const userId = getCurrentUserId();\n    const cart = getCartFromStorage(userId);\n    const exists = cart.find(ci => ci.bookId === book.id);\n    let newCart;\n    if (!exists) {\n      newCart = cart;\n    } else if (exists.quantity <= 1) {\n      newCart = cart.filter(ci => ci.bookId !== book.id);\n    } else {\n      newCart = cart.map(ci => ci.bookId === book.id ? {\n        ...ci,\n        quantity: ci.quantity - 1\n      } : ci);\n    }\n    saveCartToStorage(userId, newCart);\n    const updatedAmount = Math.max((book.addedAmount || 0) - 1, 0);\n    const updated = {\n      ...book,\n      addedAmount: updatedAmount,\n      addedToCart: updatedAmount > 0\n    };\n    setBook(updated);\n  };\n\n  // избранное\n  const toggleFavorite = () => {\n    if (!book) return;\n    const updated = {\n      ...book,\n      isFavorite: !book.isFavorite\n    };\n    setBook(updated);\n    axios.put(`http://localhost:5000/api/books/${book.id}`, updated).catch(console.error);\n  };\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"welcome\",\n    children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 21\n  }, this);\n  if (!book) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"welcome\",\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: \"\\u0421\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F \\u043E \\u043A\\u043D\\u0438\\u0433\\u0435\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"productInfoCard\",\n      initial: {\n        opacity: 0,\n        scale: 0\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        delay: 0.5,\n        duration: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"prodImg\",\n        src: book.url,\n        alt: book.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: book.isFavorite ? 'favButton2' : 'notFavButton2',\n        onClick: toggleFavorite,\n        children: \"\\u2764\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"titleProd\",\n        children: [\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435: \", book.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"authorProd\",\n        children: [\"\\u0410\\u0432\\u0442\\u043E\\u0440: \", book.author]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), book.country && /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"countryProd\",\n        children: [\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0430: \", book.country]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cartButton\",\n          onClick: addToCart,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"amount\",\n          children: book.addedAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cartButton\",\n          onClick: removeFromCart,\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"descrProd\",\n        children: book.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviewsSection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"welcome\",\n        children: \"\\u041E\\u0442\\u0437\\u044B\\u0432\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"head\",\n        children: \"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"reviewsList\",\n        children: reviews.map(rev => {\n          const storedUserString = localStorage.getItem('user');\n          const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n          const isMyReview = (storedUser === null || storedUser === void 0 ? void 0 : storedUser.id_user) && rev.user_id === storedUser.id_user;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"reviewItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reviewHeader\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [rev.firstname, \" \", rev.lastname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430: \", rev.rating]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: new Date(rev.reviewdate).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this), isMyReview && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"reviewDeleteBtn\",\n                onClick: () => handleDeleteReview(rev.id_review),\n                disabled: isDeletingReviewId === rev.id_review,\n                \"aria-label\": \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\",\n                title: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\",\n                children: isDeletingReviewId === rev.id_review ? '…' : '✕'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reviewComment\",\n              children: rev.usercomment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this)]\n          }, rev.id_review, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formContainer\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmitReview,\n          loading: isSubmittingReview,\n          error: reviewsError || '',\n          submitLabel: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\",\n          loadingLabel: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430...\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"formLabel\",\n            role: \"radiogroup\",\n            \"aria-label\": \"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430\",\n            children: [1, 2, 3, 4, 5].map(value => /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: value <= Number(rating) ? 'favButton' : 'notFavButton',\n              \"aria-checked\": value === Number(rating),\n              role: \"radio\",\n              onClick: () => !isSubmittingReview && setRating(value),\n              disabled: isSubmittingReview,\n              children: value <= Number(rating) ? '★' : '☆'\n            }, value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"formInput\",\n            value: comment,\n            onChange: e => setComment(e.target.value),\n            placeholder: \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u0435\\u0441\\u044C \\u0432\\u043F\\u0435\\u0447\\u0430\\u0442\\u043B\\u0435\\u043D\\u0438\\u0435\\u043C \\u043E \\u043A\\u043D\\u0438\\u0433\\u0435\",\n            rows: 4,\n            disabled: isSubmittingReview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        y: 1000\n      },\n      animate: {\n        y: 0\n      },\n      transition: {\n        duration: 1.5\n      },\n      children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductInfo, \"BOOBQKDckqGd2wBeN2xmuy62Z5k=\", false, function () {\n  return [useParams];\n});\n_c = ProductInfo;\nexport default ProductInfo;\nvar _c;\n$RefreshReg$(_c, \"ProductInfo\");","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","Footer","Header","motion","Form","jsxDEV","_jsxDEV","ProductInfo","_s","id","book","setBook","error","setError","reviews","setReviews","reviewsError","setReviewsError","isSubmittingReview","setIsSubmittingReview","isDeletingReviewId","setIsDeletingReviewId","rating","setRating","comment","setComment","getCurrentUserId","userRaw","localStorage","getItem","parsed","JSON","parse","id_user","getCartFromStorage","userId","raw","saveCartToStorage","cartItems","setItem","stringify","fetchBook","response","get","data","Error","row","authorResponse","author_id","author","cart","inCart","find","ci","bookId","id_book","mapped","name","title","authorId","firstname","patronymic","lastname","birthdate","substring","deathdate","country","price","Number","url","imageurl","description","addedToCart","Boolean","addedAmount","quantity","isFavorite","isfavorite","err","console","message","fetchReviews","Array","isArray","handleSubmitReview","e","preventDefault","storedUserString","storedUser","post","user_id","book_id","usercomment","handleDeleteReview","reviewId","window","confirm","delete","addToCart","exists","newCart","map","updated","removeFromCart","filter","updatedAmount","Math","max","toggleFavorite","put","catch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","div","initial","opacity","scale","animate","transition","delay","duration","src","alt","onClick","length","rev","isMyReview","Date","reviewdate","toLocaleDateString","type","id_review","disabled","onSubmit","loading","submitLabel","loadingLabel","role","value","onChange","target","placeholder","rows","y","_c","$RefreshReg$"],"sources":["C:/Users/My/OneDrive/Документы/конспекты/документы к курсачу 4 курс/project/bookmix/src/pages/ProductInfo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport Footer from '../components/Footer.js';\nimport Header from '../components/Header.js';\nimport { motion } from \"framer-motion\";\nimport Form from '../components/Form.js';\n\nconst ProductInfo = () => {\n  const { id } = useParams(); \n  const [book, setBook] = useState(null);\n  const [error, setError] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [reviewsError, setReviewsError] = useState(null);\n  const [isSubmittingReview, setIsSubmittingReview] = useState(false);\n  const [isDeletingReviewId, setIsDeletingReviewId] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState('');\n\n  const getCurrentUserId = () => {\n    try {\n      const userRaw = localStorage.getItem('user');\n      if (!userRaw) return null;\n      const parsed = JSON.parse(userRaw);\n      return parsed?.id_user || null;\n    } catch {\n      return null;\n    }\n  };\n\n  const getCartFromStorage = (userId) => {\n    if (!userId) return [];\n    try {\n      const raw = localStorage.getItem(`cart:${userId}`);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  };\n\n  const saveCartToStorage = (userId, cartItems) => {\n    if (!userId) return;\n    localStorage.setItem(`cart:${userId}`, JSON.stringify(cartItems));\n  };\n\n  useEffect(() => {\n  const fetchBook = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/books/${id}`);\n      if (!response.data) throw new Error(\"Такой книги нет!\");\n      const row = response.data;\n\n      const authorResponse = await axios.get(`http://localhost:5000/api/authors/${row.author_id}`);\n      const author = authorResponse.data;\n\n      const userId = getCurrentUserId();\n      const cart = getCartFromStorage(userId);\n      const inCart = cart.find(ci => ci.bookId === row.id_book);\n\n      const mapped = {\n        id: row.id_book,\n        name: row.title,\n        authorId: row.author_id,\n        author: author ? `${author.firstname} ${author.patronymic ? author.patronymic : ' '} ${author.lastname} \n        (${author.birthdate ? author.birthdate.substring(0, 4) : '???'} - \n            ${author.deathdate ? author.deathdate.substring(0, 4) : 'н.в.'})` : 'Неизвестный автор',\n        country: row.country,\n        price: Number(row.price),\n        url: row.imageurl,\n        description: row.description,\n        addedToCart: Boolean(inCart),\n        addedAmount: inCart ? inCart.quantity : 0,\n        isFavorite: row.isfavorite || false\n      };\n\n      setBook(mapped);\n    } catch (err) {\n      console.error(\"Ошибка при загрузке:\", err);\n      setError(err.message);\n    }\n  };\n\n  fetchBook();\n}, [id]);\n\n\n  useEffect(() => {\n  const fetchReviews = async () => {\n    try {\n      if (!id) return;\n      const { data } = await axios.get(`http://localhost:5000/api/reviews/book/${id}`);\n      setReviews(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error('Ошибка при загрузке отзывов:', err);\n      setReviewsError('Не удалось загрузить отзывы');\n    }\n  };\n\n  fetchReviews();\n}, [id]);\n\n  const handleSubmitReview = async (e) => {\n    e.preventDefault();\n    if (!book) return;\n    const storedUserString = localStorage.getItem('user');\n    const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n    if (!storedUser?.id_user) {\n      setReviewsError('Для отправки отзыва необходимо войти в систему');\n      return;\n    }\n\n    try {\n      setIsSubmittingReview(true);\n      setReviewsError(null);\n      await axios.post('http://localhost:5000/api/reviews', {\n        user_id: storedUser.id_user,\n        book_id: book.id,\n        rating: Number(rating),\n        usercomment: comment\n      });\n\n      const { data } = await axios.get(`http://localhost:5000/api/reviews/book/${book.id}`);\n      setReviews(Array.isArray(data) ? data : []);\n      setRating(5);\n      setComment('');\n    } catch (err) {\n      console.error('Ошибка при отправке отзыва:', err);\n      setReviewsError('Не удалось отправить отзыв');\n    } finally {\n      setIsSubmittingReview(false);\n    }\n  };\n\n  const handleDeleteReview = async (reviewId) => {\n    const storedUserString = localStorage.getItem('user');\n    const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n    if (!storedUser?.id_user) {\n      setReviewsError('Необходимо войти, чтобы удалять отзывы');\n      return;\n    }\n\n    if (!window.confirm('Удалить этот отзыв?')) {\n      return;\n    }\n\n    try {\n      setIsDeletingReviewId(reviewId);\n      setReviewsError(null);\n      await axios.delete(`http://localhost:5000/api/reviews/${reviewId}`);\n      const { data } = await axios.get(`http://localhost:5000/api/reviews/book/${id}`);\n      setReviews(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error('Ошибка при удалении отзыва:', err);\n      setReviewsError('Не удалось удалить отзыв');\n    } finally {\n      setIsDeletingReviewId(null);\n    }\n  };\n\n\n  // корзина\n  const addToCart = () => {\n    if (!book) return;\n    const userId = getCurrentUserId();\n    const cart = getCartFromStorage(userId);\n    const exists = cart.find(ci => ci.bookId === book.id);\n    const newCart = exists\n      ? cart.map(ci => ci.bookId === book.id ? { ...ci, quantity: ci.quantity + 1 } : ci)\n      : [...cart, { bookId: book.id, quantity: 1 }];\n    saveCartToStorage(userId, newCart);\n\n    const updated = {\n      ...book,\n      addedToCart: true,\n      addedAmount: (book.addedAmount || 0) + 1\n    };\n    setBook(updated);\n  };\n\n  const removeFromCart = () => {\n    if (!book) return;\n    const userId = getCurrentUserId();\n    const cart = getCartFromStorage(userId);\n    const exists = cart.find(ci => ci.bookId === book.id);\n    let newCart;\n    if (!exists) {\n      newCart = cart;\n    } else if (exists.quantity <= 1) {\n      newCart = cart.filter(ci => ci.bookId !== book.id);\n    } else {\n      newCart = cart.map(ci => ci.bookId === book.id ? { ...ci, quantity: ci.quantity - 1 } : ci);\n    }\n    saveCartToStorage(userId, newCart);\n\n    const updatedAmount = Math.max((book.addedAmount || 0) - 1, 0);\n    const updated = {\n      ...book,\n      addedAmount: updatedAmount,\n      addedToCart: updatedAmount > 0\n    };\n    setBook(updated);\n  };\n\n  // избранное\n  const toggleFavorite = () => {\n    if (!book) return;\n    const updated = { ...book, isFavorite: !book.isFavorite };\n    setBook(updated);\n    axios.put(`http://localhost:5000/api/books/${book.id}`, updated).catch(console.error);\n  };\n\n  if (error) return <div className='welcome'>Ошибка: {error}</div>;\n  if (!book) return <div className='welcome'>Загрузка...</div>;\n\n  return (\n    <div>\n      <Header title=\"Сведения о книге\" />\n\n      <motion.div\n        className='productInfoCard'\n        initial={{ opacity: 0, scale: 0 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ delay: 0.5, duration: 1 }}\n      >\n        <img className='prodImg' src={book.url} alt={book.name} />\n\n        <button\n          className={book.isFavorite ? 'favButton2' : 'notFavButton2'}\n          onClick={toggleFavorite}\n        >\n          ❤\n        </button>\n\n        <h2 className='titleProd'>Название: {book.name}</h2>\n        <h2 className='authorProd'>Автор: {book.author}</h2>\n        {book.country && <h2 className='countryProd'>Страна: {book.country}</h2>}\n\n        <div className='buttons2'>\n          <button className='cartButton' onClick={addToCart}>+</button>\n          <span className='amount'>{book.addedAmount}</span>\n          <button className='cartButton' onClick={removeFromCart}>-</button>\n        </div>\n\n        <p className='descrProd'>{book.description}</p>\n      </motion.div>\n\n      <div className='reviewsSection'>\n        <h3 className='welcome'>Отзывы</h3>\n          {reviews.length === 0 ? (\n          <p className='head'>Пока нет отзывов.</p>\n        ) : (\n          <ul className='reviewsList'>\n            {reviews.map((rev) => {\n              const storedUserString = localStorage.getItem('user');\n              const storedUser = storedUserString ? JSON.parse(storedUserString) : null;\n              const isMyReview = storedUser?.id_user && rev.user_id === storedUser.id_user;\n              return (\n                <li key={rev.id_review} className='reviewItem'>\n                  <div className='reviewHeader'>\n                    <strong>{rev.firstname} {rev.lastname}</strong>\n                    <span>Оценка: {rev.rating}</span>\n                    <span>{new Date(rev.reviewdate).toLocaleDateString()}</span>\n                    {isMyReview && (\n                      <button\n                        type='button'\n                        className='reviewDeleteBtn'\n                        onClick={() => handleDeleteReview(rev.id_review)}\n                        disabled={isDeletingReviewId === rev.id_review}\n                        aria-label='Удалить отзыв'\n                        title='Удалить отзыв'\n                      >\n                        {isDeletingReviewId === rev.id_review ? '…' : '✕'}\n                      </button>\n                    )}\n                  </div>\n                  <div className='reviewComment'>{rev.usercomment}</div>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className='formContainer'>\n          <Form\n            onSubmit={handleSubmitReview}\n            loading={isSubmittingReview}\n            error={reviewsError || ''}\n            submitLabel=\"Отправить отзыв\"\n            loadingLabel=\"Отправка...\"\n          >\n            <div className='formLabel' role='radiogroup' aria-label='Оценка'>\n              {[1,2,3,4,5].map((value) => (\n                <button\n                  key={value}\n                  type='button'\n                  className={value <= Number(rating) ? 'favButton' : 'notFavButton'}\n                  aria-checked={value === Number(rating)}\n                  role='radio'\n                  onClick={() => !isSubmittingReview && setRating(value)}\n                  disabled={isSubmittingReview}\n                >\n                  {value <= Number(rating) ? '★' : '☆'}\n                </button>\n              ))}\n            </div>\n            <textarea className='formInput'\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              placeholder='Поделитесь впечатлением о книге'\n              rows={4}\n              disabled={isSubmittingReview}\n            />\n          </Form>\n        </div>\n      </div>\n\n      <motion.div\n        initial={{ y: 1000 }}\n        animate={{ y: 0 }}\n        transition={{ duration: 1.5 }}\n      >\n        <Footer />\n      </motion.div>\n    </div>\n  );\n};\n\nexport default ProductInfo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}