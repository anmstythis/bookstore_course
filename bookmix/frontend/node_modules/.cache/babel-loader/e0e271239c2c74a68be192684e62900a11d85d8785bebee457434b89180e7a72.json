{"ast":null,"code":"import { getCurrentUserId } from './userUtils.js';\nexport const getFavoritesFromStorage = (userId = getCurrentUserId()) => {\n  if (!userId) return [];\n  try {\n    const raw = localStorage.getItem(`favorites:${userId}`);\n    return raw ? JSON.parse(raw) : [];\n  } catch {\n    return [];\n  }\n};\nexport const saveFavoritesToStorage = (favorites, userId = getCurrentUserId()) => {\n  if (!userId) return;\n  localStorage.setItem(`favorites:${userId}`, JSON.stringify(favorites));\n};\nexport const toggleFavoriteStorage = bookId => {\n  const userId = getCurrentUserId();\n  if (!userId) return null;\n  const favorites = getFavoritesFromStorage(userId);\n  const isFavorite = favorites.includes(bookId);\n  const updated = isFavorite ? favorites.filter(id => id !== bookId) : [...favorites, bookId];\n  saveFavoritesToStorage(updated, userId);\n  return {\n    updated,\n    isFavorite: !isFavorite\n  };\n};","map":{"version":3,"names":["getCurrentUserId","getFavoritesFromStorage","userId","raw","localStorage","getItem","JSON","parse","saveFavoritesToStorage","favorites","setItem","stringify","toggleFavoriteStorage","bookId","isFavorite","includes","updated","filter","id"],"sources":["C:/Users/My/OneDrive/Документы/конспекты/документы к курсачу 4 курс/project/bookmix/src/utils/favoriteUtils.js"],"sourcesContent":["import { getCurrentUserId } from './userUtils.js';\r\n\r\nexport const getFavoritesFromStorage = (userId = getCurrentUserId()) => {\r\n  if (!userId) return [];\r\n  try {\r\n    const raw = localStorage.getItem(`favorites:${userId}`);\r\n    return raw ? JSON.parse(raw) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const saveFavoritesToStorage = (favorites, userId = getCurrentUserId()) => {\r\n  if (!userId) return;\r\n  localStorage.setItem(`favorites:${userId}`, JSON.stringify(favorites));\r\n};\r\n\r\nexport const toggleFavoriteStorage = (bookId) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) return null;\r\n  const favorites = getFavoritesFromStorage(userId);\r\n  const isFavorite = favorites.includes(bookId);\r\n  const updated = isFavorite\r\n    ? favorites.filter(id => id !== bookId)\r\n    : [...favorites, bookId];\r\n  saveFavoritesToStorage(updated, userId);\r\n  return { updated, isFavorite: !isFavorite };\r\n};\r\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,gBAAgB;AAEjD,OAAO,MAAMC,uBAAuB,GAAGA,CAACC,MAAM,GAAGF,gBAAgB,CAAC,CAAC,KAAK;EACtE,IAAI,CAACE,MAAM,EAAE,OAAO,EAAE;EACtB,IAAI;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAaH,MAAM,EAAE,CAAC;IACvD,OAAOC,GAAG,GAAGG,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC,GAAG,EAAE;EACnC,CAAC,CAAC,MAAM;IACN,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAMK,sBAAsB,GAAGA,CAACC,SAAS,EAAEP,MAAM,GAAGF,gBAAgB,CAAC,CAAC,KAAK;EAChF,IAAI,CAACE,MAAM,EAAE;EACbE,YAAY,CAACM,OAAO,CAAC,aAAaR,MAAM,EAAE,EAAEI,IAAI,CAACK,SAAS,CAACF,SAAS,CAAC,CAAC;AACxE,CAAC;AAED,OAAO,MAAMG,qBAAqB,GAAIC,MAAM,IAAK;EAC/C,MAAMX,MAAM,GAAGF,gBAAgB,CAAC,CAAC;EACjC,IAAI,CAACE,MAAM,EAAE,OAAO,IAAI;EACxB,MAAMO,SAAS,GAAGR,uBAAuB,CAACC,MAAM,CAAC;EACjD,MAAMY,UAAU,GAAGL,SAAS,CAACM,QAAQ,CAACF,MAAM,CAAC;EAC7C,MAAMG,OAAO,GAAGF,UAAU,GACtBL,SAAS,CAACQ,MAAM,CAACC,EAAE,IAAIA,EAAE,KAAKL,MAAM,CAAC,GACrC,CAAC,GAAGJ,SAAS,EAAEI,MAAM,CAAC;EAC1BL,sBAAsB,CAACQ,OAAO,EAAEd,MAAM,CAAC;EACvC,OAAO;IAAEc,OAAO;IAAEF,UAAU,EAAE,CAACA;EAAW,CAAC;AAC7C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}