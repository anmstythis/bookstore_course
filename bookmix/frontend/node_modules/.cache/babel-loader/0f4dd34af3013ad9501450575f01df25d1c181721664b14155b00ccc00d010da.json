{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\My\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u043A\\u043E\\u043D\\u0441\\u043F\\u0435\\u043A\\u0442\\u044B\\\\\\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B \\u043A \\u043A\\u0443\\u0440\\u0441\\u0430\\u0447\\u0443 4 \\u043A\\u0443\\u0440\\u0441\\\\project\\\\bookmix\\\\src\\\\pages\\\\AddPublisher.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport AddEntity from \"./AddEntity.js\";\nimport api from \"../axiosSetup.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddPublisher = () => {\n  _s();\n  const [formData, setFormData] = useState({});\n  const fields = [{\n    name: \"legalname\",\n    label: \"Юридическое название\",\n    type: \"text\",\n    required: true\n  }, {\n    name: \"contactnum\",\n    label: \"Контактный номер\",\n    type: \"text\",\n    required: true\n  }, {\n    name: \"email\",\n    label: \"Email\",\n    type: \"email\",\n    required: true\n  },\n  // адрес\n  {\n    name: \"city\",\n    label: \"Город\",\n    type: \"text\",\n    required: true\n  }, {\n    name: \"street\",\n    label: \"Улица\",\n    type: \"text\",\n    required: true\n  }, {\n    name: \"building\",\n    label: \"Дом\",\n    type: \"text\",\n    required: false\n  }, {\n    name: \"postalcode\",\n    label: \"Почтовый индекс\",\n    type: \"text\",\n    required: false\n  }];\n  const handleSubmit = async (form, navigate, setError, setLoading) => {\n    try {\n      setLoading(true);\n      const addressRes = await api.post(\"/addresses\", {\n        city: form.city,\n        street: form.street,\n        building: form.building,\n        postalcode: form.postalcode\n      });\n      const address_id = addressRes.data.id_address;\n      await api.post(\"/publishers\", {\n        legalname: form.legalname,\n        contactnum: form.contactnum,\n        email: form.email,\n        address_id\n      });\n      navigate(-1);\n    } catch (err) {\n      console.error(\"Ошибка при добавлении издателя:\", err);\n      setError(\"Не удалось добавить издателя\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AddEntity, {\n    title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438\\u0437\\u0434\\u0430\\u0442\\u0435\\u043B\\u044F\",\n    description: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0438\\u0437\\u0434\\u0430\\u0442\\u0435\\u043B\\u044F \\u0438 \\u0435\\u0433\\u043E \\u0430\\u0434\\u0440\\u0435\\u0441\",\n    apiPath: \"/publishers\",\n    fields: fields,\n    customSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(AddPublisher, \"CgHqyReD6jKK1NawX+yWoebGi8o=\");\n_c = AddPublisher;\nexport default AddPublisher;\nvar _c;\n$RefreshReg$(_c, \"AddPublisher\");","map":{"version":3,"names":["React","useState","AddEntity","api","jsxDEV","_jsxDEV","AddPublisher","_s","formData","setFormData","fields","name","label","type","required","handleSubmit","form","navigate","setError","setLoading","addressRes","post","city","street","building","postalcode","address_id","data","id_address","legalname","contactnum","email","err","console","error","title","description","apiPath","customSubmit","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/My/OneDrive/Документы/конспекты/документы к курсачу 4 курс/project/bookmix/src/pages/AddPublisher.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport AddEntity from \"./AddEntity.js\";\r\nimport api from \"../axiosSetup.js\";\r\n\r\nconst AddPublisher = () => {\r\n  const [formData, setFormData] = useState({});\r\n\r\n  const fields = [\r\n    { name: \"legalname\", label: \"Юридическое название\", type: \"text\", required: true },\r\n    { name: \"contactnum\", label: \"Контактный номер\", type: \"text\", required: true },\r\n    { name: \"email\", label: \"Email\", type: \"email\", required: true },\r\n    // адрес\r\n    { name: \"city\", label: \"Город\", type: \"text\", required: true },\r\n    { name: \"street\", label: \"Улица\", type: \"text\", required: true },\r\n    { name: \"building\", label: \"Дом\", type: \"text\", required: false },\r\n    { name: \"postalcode\", label: \"Почтовый индекс\", type: \"text\", required: false },\r\n  ];\r\n\r\n  const handleSubmit = async (form, navigate, setError, setLoading) => {\r\n    try {\r\n      setLoading(true);\r\n      const addressRes = await api.post(\"/addresses\", {\r\n        city: form.city,\r\n        street: form.street,\r\n        building: form.building,\r\n        postalcode: form.postalcode,\r\n      });\r\n\r\n      const address_id = addressRes.data.id_address;\r\n\r\n      await api.post(\"/publishers\", {\r\n        legalname: form.legalname,\r\n        contactnum: form.contactnum,\r\n        email: form.email,\r\n        address_id,\r\n      });\r\n\r\n      navigate(-1);\r\n    } catch (err) {\r\n      console.error(\"Ошибка при добавлении издателя:\", err);\r\n      setError(\"Не удалось добавить издателя\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AddEntity\r\n      title=\"Добавить издателя\"\r\n      description=\"Введите данные нового издателя и его адрес\"\r\n      apiPath=\"/publishers\"\r\n      fields={fields}\r\n      customSubmit={handleSubmit} \r\n    />\r\n  );\r\n};\r\n\r\nexport default AddPublisher;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,SAAS,MAAM,gBAAgB;AACtC,OAAOC,GAAG,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE5C,MAAMS,MAAM,GAAG,CACb;IAAEC,IAAI,EAAE,WAAW;IAAEC,KAAK,EAAE,sBAAsB;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAClF;IAAEH,IAAI,EAAE,YAAY;IAAEC,KAAK,EAAE,kBAAkB;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAC/E;IAAEH,IAAI,EAAE,OAAO;IAAEC,KAAK,EAAE,OAAO;IAAEC,IAAI,EAAE,OAAO;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAChE;EACA;IAAEH,IAAI,EAAE,MAAM;IAAEC,KAAK,EAAE,OAAO;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAC9D;IAAEH,IAAI,EAAE,QAAQ;IAAEC,KAAK,EAAE,OAAO;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAChE;IAAEH,IAAI,EAAE,UAAU;IAAEC,KAAK,EAAE,KAAK;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAM,CAAC,EACjE;IAAEH,IAAI,EAAE,YAAY;IAAEC,KAAK,EAAE,iBAAiB;IAAEC,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAChF;EAED,MAAMC,YAAY,GAAG,MAAAA,CAAOC,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,KAAK;IACnE,IAAI;MACFA,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMC,UAAU,GAAG,MAAMjB,GAAG,CAACkB,IAAI,CAAC,YAAY,EAAE;QAC9CC,IAAI,EAAEN,IAAI,CAACM,IAAI;QACfC,MAAM,EAAEP,IAAI,CAACO,MAAM;QACnBC,QAAQ,EAAER,IAAI,CAACQ,QAAQ;QACvBC,UAAU,EAAET,IAAI,CAACS;MACnB,CAAC,CAAC;MAEF,MAAMC,UAAU,GAAGN,UAAU,CAACO,IAAI,CAACC,UAAU;MAE7C,MAAMzB,GAAG,CAACkB,IAAI,CAAC,aAAa,EAAE;QAC5BQ,SAAS,EAAEb,IAAI,CAACa,SAAS;QACzBC,UAAU,EAAEd,IAAI,CAACc,UAAU;QAC3BC,KAAK,EAAEf,IAAI,CAACe,KAAK;QACjBL;MACF,CAAC,CAAC;MAEFT,QAAQ,CAAC,CAAC,CAAC,CAAC;IACd,CAAC,CAAC,OAAOe,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEF,GAAG,CAAC;MACrDd,QAAQ,CAAC,8BAA8B,CAAC;IAC1C,CAAC,SAAS;MACRC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACEd,OAAA,CAACH,SAAS;IACRiC,KAAK,EAAC,mGAAmB;IACzBC,WAAW,EAAC,gOAA4C;IACxDC,OAAO,EAAC,aAAa;IACrB3B,MAAM,EAAEA,MAAO;IACf4B,YAAY,EAAEvB;EAAa;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5B,CAAC;AAEN,CAAC;AAACnC,EAAA,CAnDID,YAAY;AAAAqC,EAAA,GAAZrC,YAAY;AAqDlB,eAAeA,YAAY;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}